---
title: Tidytuesday (2019-08-13)
author: Philippe Massicotte
date: '2019-08-14'
slug: tidytuesday-2019-08-13
categories: []
tags:
  - Tidytuesday
  - Tidyverse
type: ''
image: ''
subtitle: 'Roman Emperors'
editor_options:
  chunk_output_type: console
---



<p>This week, the <a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-08-13">TidyTuesday challenge</a> is about Roman emperors. The dataset provides the name, birth, death and reign information for 68 Roman emperors.</p>
<div id="the-data" class="section level2">
<h2>The data</h2>
<pre class="r"><code>emperors &lt;-
  readr::read_csv(
    &quot;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-08-13/emperors.csv&quot;
  )

emperors
#&gt; # A tibble: 68 x 16
#&gt;    index name  name_full birth      death      birth_cty birth_prv rise 
#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;
#&gt;  1     1 Augu~ IMPERATO~ 0062-09-23 0014-08-19 Rome      Italia    Birt~
#&gt;  2     2 Tibe~ TIBERIVS~ 0041-11-16 0037-03-16 Rome      Italia    Birt~
#&gt;  3     3 Cali~ GAIVS IV~ 0012-08-31 0041-01-24 Antitum   Italia    Birt~
#&gt;  4     4 Clau~ TIBERIVS~ 0009-08-01 0054-10-13 Lugdunum  Gallia L~ Birt~
#&gt;  5     5 Nero  NERO CLA~ 0037-12-15 0068-06-09 Antitum   Italia    Birt~
#&gt;  6     6 Galba SERVIVS ~ 0002-12-24 0069-01-15 Terracina Italia    Seiz~
#&gt;  7     7 Otho  MARCVS S~ 0032-04-28 0069-04-16 Terentin~ Italia    Appo~
#&gt;  8     8 Vite~ AVLVS VI~ 0015-09-24 0069-12-20 Rome      Italia    Seiz~
#&gt;  9     9 Vesp~ TITVS FL~ 0009-11-17 0079-06-24 Falacrine Italia    Seiz~
#&gt; 10    10 Titus TITVS FL~ 0039-12-30 0081-09-13 Rome      Italia    Birt~
#&gt; # ... with 58 more rows, and 8 more variables: reign_start &lt;date&gt;,
#&gt; #   reign_end &lt;date&gt;, cause &lt;chr&gt;, killer &lt;chr&gt;, dynasty &lt;chr&gt;, era &lt;chr&gt;,
#&gt; #   notes &lt;chr&gt;, verif_who &lt;chr&gt;</code></pre>
</div>
<div id="exploratory-graph" class="section level2">
<h2>Exploratory graph</h2>
<p>In the following graph, I wanted to visualize the relationship between the age and the reign duration of each emperor. First, lets calculate the age and the reign period of each emperor.</p>
<pre class="r"><code>emperors &lt;- emperors %&gt;%
  drop_na(death, birth, reign_start, reign_end) %&gt;%
  filter(death &gt;= birth) %&gt;%
  mutate(age = lubridate::time_length(death - birth, unit = &quot;year&quot;)) %&gt;% 
  mutate(reign_duration = lubridate::time_length(reign_end - reign_start, unit = &quot;year&quot;)) </code></pre>
<p>I can now graph the relationship between the age and the reign duration of each emperor.</p>
<pre class="r"><code>emperors %&gt;% 
  mutate(
    name = glue(
      &quot;{name} ({round(age, digits = 0)} years old)&quot;
    )
  ) %&gt;%
  mutate(name = fct_reorder(name, death)) %&gt;%
  ggplot(aes(
    x = birth,
    xend = death,
    y = name,
    yend = name
  )) +
  geom_segment(size = 3, lineend = &quot;round&quot;, aes(color = dynasty)) +
  geom_segment(
    aes(x = reign_start, xend = reign_end),
    color = &quot;black&quot;,
    size = 1,
    lineend = &quot;round&quot;
  ) +
  geom_label(aes(
    x = death,
    y = name,
    label = glue(
      &quot;Reign: {round(reign_duration, digits = 2)} years&quot;
    )
  ),
  hjust = -0.1,
  label.size = 0,
  size = 3,
  family = &quot;Poppins&quot;
  ) +
  geom_mark_circle(
    aes(
      label = glue(&quot;{name}&quot;),
      description = &quot;The oldest emperor&quot;,
      filter = age == max(age),
      color = dynasty
    ),
    expand = unit(0.01, &quot;mm&quot;),
    label.family = c(&quot;Poppins&quot;),
    label.fontsize = 8,
    label.buffer = unit(5, &quot;mm&quot;),
    label.hjust = 1, 
    show.legend = FALSE
  ) +
  geom_mark_circle(
    aes(
      label = glue(&quot;{name}&quot;),
      description = &quot;The longest reign&quot;,
      filter = reign_duration == max(reign_duration),
      color = dynasty
    ),
    expand = unit(0.01, &quot;mm&quot;),
    label.family = c(&quot;Poppins&quot;),
    label.fontsize = 8,
    label.buffer = unit(5, &quot;mm&quot;),
    label.hjust = 1,
    show.legend = FALSE
  ) +
  theme(legend.position = &quot;bottom&quot;) +
  theme(panel.grid.major.x = element_blank(), panel.grid.minor.x = element_blank()) +
  scale_x_date(expand = expand_scale(mult = c(0.02, 0.3))) +
  ylab(NULL) +
  xlab(&quot;Years&quot;) +
  labs(color = &quot;Dynasty&quot;) +
  labs(title = str_wrap(&quot;Roman emperors: their birth, death and reign&quot;, 35)) +
  labs(subtitle = str_wrap(&quot;Colored bars represent the lifespan whereas the black bars the duration of the reign of each emperor&quot;, 60)) +
  labs(caption = &quot;Data: https://bit.ly/2N2spWr | Visualization: @philmassicotte&quot;) +
  scale_color_brewer(palette = &quot;Pastel2&quot;)</code></pre>
<p><img src="/post/2019-08-14-tidytuesday-2019-08-13.en_files/figure-html/unnamed-chunk-3-1.svg" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="causes-of-death" class="section level2">
<h2>Causes of death</h2>
<pre class="r"><code>emperors %&gt;% 
  count(cause) %&gt;% 
  mutate(cause = fct_reorder(cause, n)) %&gt;% 
  ggplot(aes(x = cause, y = n)) +
  geom_col() +
  coord_flip() +
  xlab(NULL) +
  ylab(&quot;Number of death&quot;) +
  scale_y_continuous(expand = expand_scale(mult = c(0, 0.2))) +
  labs(title = &quot;Principal causes of death&quot;) +
  labs(subtitle = glue(&quot;Based on {nrow(emperors)} observations&quot;)) +
  labs(caption = &quot;Data: https://bit.ly/2N2spWr | Visualization: @philmassicotte&quot;)</code></pre>
<p><img src="/post/2019-08-14-tidytuesday-2019-08-13.en_files/figure-html/unnamed-chunk-4-1.svg" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="some-stats" class="section level2">
<h2>Some stats</h2>
<table>
<thead>
<tr class="header">
<th align="left">Stats</th>
<th align="left">Age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Average age at death</td>
<td align="left">49 years old</td>
</tr>
<tr class="even">
<td align="left">Average reign duration</td>
<td align="left">8 years old</td>
</tr>
<tr class="odd">
<td align="left">Youngest emperor</td>
<td align="left">19 years old</td>
</tr>
<tr class="even">
<td align="left">Oldest emperor</td>
<td align="left">79 years old</td>
</tr>
<tr class="odd">
<td align="left">Longest reign</td>
<td align="left">30.85 years</td>
</tr>
<tr class="even">
<td align="left">Shortest reign</td>
<td align="left">0.06 years</td>
</tr>
</tbody>
</table>
</div>
